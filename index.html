<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>My WebMail</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body{
      background:#0f172a;
      color:white;
      font-family:Arial;
      margin:0;
    }

    header{
      padding:20px;
      background:#111827;
      text-align:center;
      font-size:22px;
      font-weight:bold;
    }

    .box{
      max-width:400px;
      margin:40px auto;
      background:#020617;
      padding:20px;
      border-radius:10px;
      box-shadow:0 0 20px rgba(255,255,255,.05);
    }

    input{
      width:100%;
      padding:10px;
      margin:10px 0;
      border-radius:5px;
      border:none;
    }

    button{
      width:100%;
      padding:10px;
      margin-top:10px;
      border:none;
      border-radius:5px;
      background:#3b82f6;
      color:white;
      font-size:16px;
    }

    .hidden{ display:none; }
  </style>
</head>

<body>

<header>
  My WebMail ‚Äî Connexion
</header>

<div class="box" id="authBox">

  <h3>Cr√©er un compte</h3>
  <input id="signupEmail" placeholder="Email">
  <input id="signupPass" type="password" placeholder="Mot de passe">
  <button id="signupBtn">S'inscrire</button>

  <hr>

  <h3>Connexion</h3>
  <input id="loginEmail" placeholder="Email">
  <input id="loginPass" type="password" placeholder="Mot de passe">
  <button id="loginBtn">Se connecter</button>

</div>


<div class="box hidden" id="userBox">
  <h3 id="userEmail"></h3>
  <button id="logoutBtn">Se d√©connecter</button>
</div>


<!-- üî• Firebase -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, 
           createUserWithEmailAndPassword, 
           signInWithEmailAndPassword,
           signOut,
           onAuthStateChanged } 
  from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  // CONFIG PERSONNALIS√âE ‚Äî LA TIENNE ‚úîÔ∏è
  const firebaseConfig = {
    apiKey: "AIzaSyAf0rz9mpUG2GpxyBeIyBvuHLHu-mANlSt",
    authDomain: "movnembaii.firebaseapp.com",
    projectId: "movnembaii",
    storageBucket: "movnembaii.firebasestorage.app",
    messagingSenderId: "753446508336",
    appId: "1:753446508336:web:638f226312374d79e32fed",
    measurementId: "G-CPYXKPRQGW"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  const authBox = document.getElementById("authBox");
  const userBox = document.getElementById("userBox");
  const userEmail = document.getElementById("userEmail");

  // Cr√©ation de compte
  document.getElementById("signupBtn").onclick = () => {
    createUserWithEmailAndPassword(
      auth,
      signupEmail.value,
      signupPass.value
    ).then(() => alert("Compte cr√©√© üéâ"))
     .catch(err => alert(err.message));
  };

  // Connexion
  document.getElementById("loginBtn").onclick = () => {
    signInWithEmailAndPassword(
      auth,
      loginEmail.value,
      loginPass.value
    ).catch(err => alert(err.message));
  };

  // D√©connexion
  document.getElementById("logoutBtn").onclick = () => {
    signOut(auth);
  };

  // Changement d'√©tat
  onAuthStateChanged(auth, user => {
    if(user){
      authBox.classList.add("hidden");
      userBox.classList.remove("hidden");
      userEmail.innerText = "Connect√© : " + user.email;
    } else {
      userBox.classList.add("hidden");
      authBox.classList.remove("hidden");
    }
  });
</script>

</body>
</html>
